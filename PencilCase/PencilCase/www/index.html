<!DOCTYPE html>
<html>
<head>
    <!--
        Customize the content security policy in the meta tag below as needed. Add 'unsafe-inline' to default-src to enable inline JavaScript.
        For details, see http://go.microsoft.com/fwlink/?LinkID=617521
    -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *">

    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.4.5.min.css">
    <link rel="stylesheet" type="text/css" href="css/daterangepicker.css">
    <link rel="stylesheet" type="text/css" href="css/custom.css">

    <script type="text/javascript" src="cordova.js"></script>
    <!-- The 'async' attribute is needed for RequireJS to work in a Windows app -->
    <script type="text/javascript" src="scripts/knockout-3.4.2.js"></script>
    <script type="text/javascript" src="scripts/jquery-1.8.0.min.js"></script>
    <script type="text/javascript" src="scripts/jquery.mobile-1.4.5.min.js"></script>
    <script type="text/javascript" src="scripts/Chart.min.js"></script>
    <script type="text/javascript" src="scripts/moment.min.js"></script>
    <script type="text/javascript" src="scripts/daterangepicker.js"></script>
    <script type="text/javascript" src="scripts/palette.js"></script>
    <script type="text/javascript" data-main="scripts/startup" src="lib/require.2.1.8.js" async></script>
    <script type="text/javascript" src="scripts/CustomBindings/Bindings.js"></script>
    <script type="text/javascript" src="scripts/CustomBindings/ListviewBinding.js"></script>
    <script type="text/javascript" src="scripts/CustomBindings/SelectComponentInitialValueBinding.js"></script>
    <script type="text/javascript" src="scripts/CustomBindings/InitialSelectedTabBinding.js"></script>
    <script type="text/javascript" src="scripts/CustomBindings/SelectChangeBinding.js"></script>
    <script type="text/javascript" src="scripts/CustomBindings/CenterPositionBinding.js"></script>
</head>
<body>
    <!-- ==============Home Page================= -->
    <!-- Make sure the page id here is exactly the same as it defined in Consts.Pages -->
    <div data-role="page" id="HomePage">
        <!-- ko with: homePage() -->
        <div data-role="header" data-position="fixed" data-tap-toggle="false">
            <h1>Pencil Case</h1>
        </div>
        <div role="main" class="ui-content">
            <div style="display: none" data-bind="visible: $parent.isDataLoaded">
                <a href="#Retail" class="ui-btn ui-corner-all" data-bind="click: openRetailPage">Retail</a>
                <a href="#RetailWholesale" class="ui-btn ui-corner-all" data-bind="click: openRetailWholesalePage">RetailWholesale</a>
                <a href="#Wholesale" class="ui-btn ui-corner-all" data-bind="click: openWholesalePage">Wholesale</a>
                <a href="#ProductManagement" class="ui-btn ui-corner-all" data-bind="click: openProductManagementPage">Product Management</a>
                <a href="#ImportProduct" class="ui-btn ui-corner-all" data-bind="click: openImportProductPage">进货</a>
                <a href="#DataAnalyse" class="ui-btn ui-corner-all" data-bind="click: openDataAnalysePage">Data Analyse</a>
                <a href="#OrderManagement" class="ui-btn ui-corner-all" data-bind="click: openOrderManagementPage">Order Management</a>
            </div>
            <div data-bind="visible: !$parent.isDataLoaded()">
                <h1>正在加载数据……</h1>
            </div>
        </div>
        <footer data-role="footer" data-position="fixed" data-tap-toggle="false">
            <h4>@Copyright - Frank</h4>
        </footer>
        <!-- /ko -->
    </div>

    <!-- ==============Product Management Page================= -->
    <!-- Try not bind UI stuff on Home Page like header and footer, because such UI binding will be applied until device ready,
        and at that time, static UI already loaded for a while, it is confusing for users becasue they can note that UI loaded at 2 different time point. -->
    <!-- Make sure the page id here is exactly the same as it defined in Consts.Pages -->
    <div data-role="page" id="ProductManagement">
        <!-- ko if: activePage().pageId === 'ProductManagement' -->
        <!-- ko with: activePage() -->
        <div data-role="header" data-position="fixed" data-tap-toggle="false">
            <a href="#HomePage" data-icon="home" data-bind="click: navigator.goHome">Home</a>
            <h1><span data-bind="text: title"></span></h1>
            <a href="#" data-icon="plus" class="ui-icon-plus" data-bind="click: addNewProduct">Add</a>
        </div>
        <div data-role="main" class="ui-content">
            <ul data-role="listview" data-inset="true" data-bind="foreach: products, listview: products">
                <li>
                    <a href="#" data-bind="click: $parent.showDetails">
                        <h2><span data-bind="text: Name"></span></h2>
                        <p>
                            <span>零售价:</span>
                            <span data-bind="text: '￥' + RetailPrice"></span>
                            <span>&nbsp;&nbsp;</span>
                            <span>零批价:</span>
                            <span data-bind="text: '￥' + RetailWholesalePrice"></span>

                        </p>
                        <p>
                            <span>批发价:</span>
                            <span data-bind="text: '￥' + WholesalePrice"></span>
                            <span data-bind="text: '(' + Times + RetailUnitName + '/' + WholesaleUnitName + ')'"></span>
                            <span class="ui-li-count" data-bind="text: '库存：' + Inventory"></span>
                        </p>
                    </a>
                </li>
            </ul>
        </div>
        <!-- /ko -->
        <!-- /ko -->
    </div>

    <!-- ============== Confirm Dialog ================= -->
    <!-- Public Confirm Dialog that everyone can use, so, for this app, there can be only one confirm dialog at one time -->
    <div data-role="dialog" id="ConfirmDialog">
        <!-- ko if: confirmDialog -->
        <!-- ko with: confirmDialog() -->
        <div data-role="content" class="ui-content ui-body-a" data-bind="centerPosition: { target: { self: false, relationship: 'parents', selector: 'div.ui-dialog-contain.ui-overlay-shadow'}, containerSelector: 'div#ConfirmDialog'}">
            <h3><span data-bind="text: header"></span></h3>
            <p><span data-bind="text: content"></span></p>
            <fieldset class="ui-grid-a">
                <div class="ui-block-a"><a href="#" data-role="button" data-bind="click: confirm, visible: showConfirm"><span data-bind="text: confirmButtonText"></span></a></div>
                <div class="ui-block-b"><a href="#" data-role="button" data-rel="back" data-bind="visible: showCancel"><span data-bind="text: cancelButtonText"></span></a></div>
            </fieldset>
        </div>
        <!-- /ko -->
        <!-- /ko -->
    </div>

    <!-- ==============Product Editor Page================= -->
    <!-- Make sure the page id here is exactly the same as it defined in Consts.Pages -->
    <div data-role="page" id="ProductEditor">
        <!-- ko if: activePage().pageId === 'ProductEditor' -->
        <!-- ko with: activePage() -->
        <div data-role="header" data-position="fixed" data-tap-toggle="false">
            <a href="#ProductManagement" data-icon="back" data-bind="click: back">Back</a>
            <h1><span data-bind="text: title"></span></h1>
        </div>
        <div data-role="main" class="ui-content">
            <div data-role="tabs" id="detailTabs" data-bind="visible: !isInEditingMode(), initialSelectedTab: {condition: isNotInEditingMode, selector: 'a[href=\'#detailsGeneral\']'}">
                <div data-role="navbar">
                    <ul>
                        <li><a href="#detailsGeneral" data-ajax="false" class="ui-btn-active">General Info</a></li>
                        <li><a href="#detailsPrice" data-ajax="false">Prices</a></li>
                    </ul>
                </div>
                <div id="detailsGeneral" class="ui-body-d ui-content">
                    <form>
                        <p>
                            <span style="font-weight: bold">名称：</span><span data-bind="text: originalProduct().Name"></span>
                        </p>
                        <p>
                            <span style="font-weight: bold">描述：</span><span data-bind="text: originalProduct().Description"></span>
                        </p>
                        <p>
                            <span style="font-weight: bold">库存：</span><span data-bind="text: originalProduct().Inventory"></span>
                        </p>
                        <p>
                            <span style="font-weight: bold">图片：</span>
                            <div style="width: 150px; height: 150px;">
                                <img style="width: auto; max-height: 100%;" data-bind="attr: { 'src': originalProduct().Image ? ('data:image/jpeg;base64,' + originalProduct().Image) :('data:image/jpeg;base64,' + defaultImage)}" />
                            </div>
                        </p>
                        <p>
                            <span style="font-weight: bold">创建时间：</span><span data-bind="text: moment(originalProduct().CreatedDate).format('YYYY-MM-DD')"></span>
                        </p>
                        <p>
                            <span style="font-weight: bold">上次修改时间：</span><span data-bind="text: moment(originalProduct().ModifiedDate).format('YYYY-MM-DD')"></span>
                        </p>

                    </form>
                </div>
                <div id="detailsPrice" class="ui-body-d ui-content">
                    <form>
                        <p>
                            <span style="font-weight: bold">零售单位：</span><span data-bind="text: originalProduct().RetailUnitName"></span>
                        </p>
                        <p>
                            <span style="font-weight: bold">零售价：</span><span data-bind="text: originalProduct().RetailPrice + '元'"></span>
                        </p>
                        <p>
                            <span style="font-weight: bold">零批价：</span><span data-bind="text: originalProduct().RetailWholesalePrice + '元'"></span>
                        </p>
                        <p>
                            <span style="font-weight: bold">批发单位：</span><span data-bind="text: originalProduct().WholesaleUnitName"></span>
                        </p>
                        <p>
                            <span style="font-weight: bold">单位关系：</span><span data-bind="text: originalProduct().Times + originalProduct().RetailUnitName + '/' + originalProduct().WholesaleUnitName"></span>
                        </p>
                        <p>
                            <span style="font-weight: bold">批发价：</span><span data-bind="text: originalProduct().WholesalePrice + '元'"></span>
                        </p>
                        <p>
                            <span style="font-weight: bold">最新进货价（按批发单位）：</span><span data-bind="text: originalProduct().ImportWholesalePrice + '元'"></span>
                        </p>
                        <p>
                            <span style="font-weight: bold">最新进货价（按零售单位）：</span><span data-bind="text: originalProduct().ImportRetailPrice.toFixed(2) + '元'"></span>
                        </p>
                        <p>
                            <span style="font-weight: bold">最新成本价（按批发单位）：</span><span data-bind="text: originalProduct().WholesaleCost.toFixed(2) + '元'"></span>
                        </p>
                        <p>
                            <span style="font-weight: bold">最新成本价（按零售单位）：</span><span data-bind="text: originalProduct().RetailCost.toFixed(2) + '元'"></span>
                        </p>
                    </form>
                </div>
            </div>

            <div data-role="tabs" id="editingTabs" data-bind="visible: isInEditingMode, initialSelectedTab: {condition: isInEditingMode, selector: 'a[href=\'#editingGeneral\']'}">
                <div data-role="navbar">
                    <ul>
                        <li><a href="#editingGeneral" data-ajax="false" class="ui-btn-active">General Info</a></li>
                        <li><a href="#editingPrice" data-ajax="false">Prices</a></li>
                    </ul>
                </div>
                <div id="editingGeneral" class="ui-body-d ui-content">
                    <form>
                        <label style="font-weight: bold" for="productName">名称：</label>
                        <input type="text" name="productName" data-bind="textInput: name, style: { border: name.hasError() ? '1px solid red' : '0'}" />
                        <div class="validation-error-message" data-bind="visible: name.hasError">
                            <span data-bind='text: name.validationMessage'></span>
                        </div>
                        <label style="font-weight: bold" for="productDescription">描述：</label>
                        <textarea name="productDescription" data-bind="value: description"></textarea>
                        <label style="font-weight: bold" for="productInventory">库存：</label>
                        <input type="number" name="productInventory" data-bind="value: inventory, enable: false" />
                        <label style="font-weight: bold">图片：</label>
                        <a href="#" class="ui-btn ui-shadow ui-corner-all ui-icon-camera ui-btn-icon-notext ui-btn-b ui-btn-inline" data-bind="click: getImageByCamera, visible: true"></a>
                        <a href="#" class="ui-btn ui-shadow ui-corner-all ui-icon-grid ui-btn-icon-notext ui-btn-b ui-btn-inline" data-bind="click: getImageFromAlbum, visible: true"></a>
                        <!-- ko if: imageSource -->
                        <a href="#" class="ui-btn ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-b ui-btn-inline" data-bind="click: removeImage, visible: true"></a>
                        <div style="width: 150px; height: 150px;">
                            <img style="width: auto; max-height: 100%;" data-bind="attr: { 'src': imageSource() ? ('data:image/jpeg;base64,' + imageSource()) : ('data:image/jpeg;base64,' + defaultImage)}" />
                        </div>
                        <!-- /ko -->
                    </form>
                </div>
                <div id="editingPrice" class="ui-body-d ui-content">
                    <form>
                        <label style="font-weight: bold" for="productRetailUnit">零售单位：</label>
                        <select name="productRetailUnit" data-bind="options: uomDataSource, optionsText: 'Name', optionsValue: 'Id', value: retailUnit, selectComponentInitialValue: retailUnit"></select>
                        <label for="productRetailPrice" style="font-weight: bold">零售价(元)：</label>
                        <input type="number" name="productRetailPrice" data-bind="textInput: retailPrice, style: { border: retailPrice.hasError() ? '1px solid red' : '0'}" />
                        <div class="validation-error-message" data-bind="visible: retailPrice.hasError">
                            <span data-bind='text: retailPrice.validationMessage'></span>
                        </div>

                        <label for="productRetailWholesalePrice" style="font-weight: bold">零批价(元)：</label>
                        <input type="number" name="productRetailWholesalePrice" data-bind="textInput: retailWholesalePrice, style: { border: retailWholesalePrice.hasError() ? '1px solid red' : '0'}" />
                        <div class="validation-error-message" data-bind="visible: retailWholesalePrice.hasError">
                            <span data-bind='text: retailWholesalePrice.validationMessage'></span>
                        </div>

                        <label for="productWholesaleUnit" style="font-weight: bold">批发单位：</label>
                        <select name="productWholesaleUnit" data-bind="options: uomDataSource, optionsText: 'Name', optionsValue: 'Id', value: wholesaleUnit, selectComponentInitialValue: wholesaleUnit"></select>
                        <label for="productTimes" style="font-weight: bold">单位关系：<span data-bind="text: '(如：12个每箱就填12)'"></span></label>
                        <input type="number" name="productTimes" data-bind="textInput: times, style: { border: times.hasError() ? '1px solid red' : '0'}" />
                        <div class="validation-error-message" data-bind="visible: times.hasError">
                            <span data-bind='text: times.validationMessage'></span>
                        </div>

                        <label for="productWholesalePrice" style="font-weight: bold">批发价(元)：</label>
                        <input type="number" name="productWholesalePrice" data-bind="textInput: wholesalePrice, style: { border: wholesalePrice.hasError() ? '1px solid red' : '0'}" />
                        <div class="validation-error-message" data-bind="visible: wholesalePrice.hasError">
                            <span data-bind='text: wholesalePrice.validationMessage'></span>
                        </div>

                        <!-- 编辑时不显示下面fields -->
                        <!--<lable for="productImportRetailPrice" style="font-weight: bold">最新进货价(元)（按零售单位）：</lable>
                        <input type="number" name="productImportRetailPrice" data-bind="value: originalProduct().ImportRetailPrice, enable: false" />
                        <lable for="productImportWholesalePrice" style="font-weight: bold">最新进货价(元)（按批发单位）：</lable>
                        <input type="number" name="productImportWholesalePrice" data-bind="value: originalProduct().ImportWholesalePrice, enable: false" />-->
                        <!-- 此处应为成本价，TODO: 决定是否允许编辑，应由进货价格和库存计算得出 -->
                        <!--<lable for="productImportRetailPrice" style="font-weight: bold">成本价(元)（按零售单位）：</lable>
                        <input type="number" name="productImportRetailPrice" data-bind="value: originalProduct().RetailCost, enable: false" />-->
                        <!-- 此处应为成本价，TODO: 决定是否允许编辑，应由进货价格和库存计算得出 -->
                        <!--<lable for="productImportWholesalePrice" style="font-weight: bold">成本价(元)（按批发单位）：</lable>
                        <input type="number" name="productImportWholesalePrice" data-bind="value: originalProduct().WholesaleCost, enable: false" />-->
                    </form>
                </div>
            </div>
        </div>
        <footer data-role="footer" data-position="fixed" data-tap-toggle="false">
            <div data-role="navbar" data-grid="a">
                <ul>
                    <li>
                        <a id="editButton" href="#" data-bind="click: startEditing, visible: !isInEditingMode(), css: {'ui-btn-active': isInEditingMode}" data-icon="edit">Edit</a>
                        <a id="saveButton" href="#" data-bind="click: save, visible: isInEditingMode, css: {'ui-state-disabled': canSave() == false}" data-icon="check">Save</a>
                    </li>
                    <li>
                        <!-- click 绑定的方法名不能是delete，花了1小时发现的问题，难道是某种豫留关键字或什么东西。 -->
                        <a id="deleteButton" href="#" data-bind="click: deleteProduct, visible: !isInEditingMode()" data-icon="delete">Delete</a>
                        <a id="cancelButton" href="#" data-bind="click: cancel, visible: isInEditingMode" data-icon="arrow-u-l">Cancel</a>
                    </li>
                </ul>
            </div>
        </footer>
        <!-- /ko -->
        <!-- /ko -->
    </div>

    <!-- ==============Import Product Page================= -->
    <!-- Make sure the page id here is exactly the same as it defined in Consts.Pages -->
    <div data-role="page" id="ImportProduct">
        <!-- ko if: activePage().pageId === 'ImportProduct' -->
        <!-- ko with: activePage() -->
        <div data-role="header" data-position="fixed" data-tap-toggle="false">
            <a href="#HomePage" data-icon="home" data-bind="click: navigator.goHome">Home</a>
            <h1><span data-bind="text: title"></span></h1>
        </div>
        <div data-role="main" class="ui-content">
            <select id="importProductSelect" style="margin-left: unset; margin-right: unset" data-mini="true" data-native-menu="false" class="filterable-select" data-bind="selectChange: clearSelection, options: products, optionsText: 'Name', optionsValue: 'Id', value: selectedProductId"></select>
            <div data-bind="visible: productSelected" style="margin-top: 10px; margin-left: 3px;">
                <table>
                    <tr>
                        <td><label style="font-weight: bold;">价格：</label></td>
                        <td><input data-mini="true" type="number" style="width: 50px" data-bind="value: selectedProductImportPrice" /></td>
                        <td><span data-bind="text: selectedProduct() ? '元/' + selectedProduct().WholesaleUnitName: ''"></span></td>
                    </tr>
                </table>
            </div>
            <div data-bind="visible: productSelected" style="margin-left: 3px;">
                <table>
                    <tr>
                        <td><span style="font-weight: bold; display: inline">数量：</span></td>
                        <td><a style="margin: 0" href="#" data-bind="click: decreaseQuantity" class="ui-btn ui-mini ui-shadow ui-corner-all ui-icon-minus ui-btn-icon-notext ui-btn-inline">Minus</a></td>
                        <td><input data-mini="true" type="number" style="width: 50px" data-bind="textInput: selectedProductQuantity, style: { border: (numberOnlyRegExp.test(selectedProductQuantity()) == false) ? '1px solid red' : '0'}" /></td>
                        <td><a style="margin: 0" href="#" data-bind="click: increaseQuantity" class="ui-btn ui-mini ui-shadow ui-corner-all ui-icon-plus ui-btn-icon-notext ui-btn-inline">Plus</a></td>
                    </tr>
                </table>
            </div>
            <div style="margin-left: 3px;" class="ui-grid-a" data-bind="visible: productSelected">
                <div class="ui-block-a">
                    <a data-role="button" class="ui-btn ui-mini ui-corner-all ui-shadow" href="#" data-bind="click: addOrder, css:{ 'ui-state-disabled': numberOnlyRegExp.test(selectedProductQuantity()) == false}">添加商品</a>
                </div>
                <div class="ui-block-b">
                    <a data-role="button" class="ui-btn ui-mini ui-corner-all ui-shadow" href="#" data-bind="click: cancelOrderAdding">取消</a>
                </div>
            </div>
            <hr style=" height:2px;border:none;border-top:2px dotted grey;" />
            <div data-bind="visible: orders().length > 0" style="font-size: 0.8em">
                <ul data-role="listview" data-inset="true" data-bind="foreach: orders, listview: orders">
                    <li style="padding-right: 0">
                        <table style="width: 100%">
                            <tr>
                                <td>
                                    <div>
                                        <span style="font-weight: bold" data-bind="text: product().Name"></span>
                                        <span>&nbsp;&nbsp;&nbsp;&nbsp;</span>
                                        <span data-bind="text: price() + '元'"></span>
                                        <span data-bind="text: '/' + product().WholesaleUnitName + '/'"></span>
                                        <span data-bind="text: product().Times"></span>
                                        <span data-bind="text: product().RetailUnitName"></span>
                                    </div>
                                </td>
                                <th rowspan="2" style="width: 1em">
                                    <a href="#" class="ui-btn ui-mini ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-inline" data-bind="click: $parent.deleteOrder"></a>
                                </th>
                            </tr>
                            <tr>
                                <td>
                                    <div style="display:inline">
                                        <table style="vertical-align: -webkit-baseline-middle; margin-left: -10px; display: inline;">
                                            <tr>
                                                <td>
                                                    <a href="#" style="margin: 0" class="ui-btn ui-mini ui-shadow ui-corner-all ui-icon-minus ui-btn-icon-notext ui-btn-inline" data-bind="click: $parent.decreaseOrderProductQuantity">Minus</a>
                                                </td>
                                                <td>
                                                    <!-- Use textInput binding instead of value binding to make the data changed immediatly, but not on losing focus. -->
                                                    <!-- http://knockoutjs.com/documentation/textinput-binding.html -->
                                                    <!--<input type="number" style="width: 30px; text-align: center" data-bind="value: quantity" />-->
                                                    <input type="number" style="width: 30px; text-align: center" data-bind="textInput: quantity, css: {'textbox-validation-error': $parent.numberOnlyRegExp.test(quantity()) == false}" />
                                                </td>
                                                <td>
                                                    <a href="#" style="margin: 0" class="ui-btn ui-shadow ui-corner-all ui-icon-plus ui-btn-icon-notext ui-btn-inline" data-bind="click: $parent.increaseOrderProductQuantity">Plus</a>
                                                </td>

                                            </tr>
                                        </table>
                                        <span>&nbsp;&nbsp;</span>
                                        <span data-bind="text: '小计'"></span>
                                        <span data-bind="text: total() + '元'"></span>
                                    </div>
                                </td>
                            </tr>
                        </table>

                    </li>
                </ul>
            </div>
        </div>
        <footer data-role="footer" data-position="fixed" data-tap-toggle="false" data-bind="visible: orders().length > 0">
            <div style="padding: 5px; text-align: center; color: orangered">
                <span>总量：</span><span data-bind="text: totalNumber"></span>
                <span>&nbsp;&nbsp;&nbsp;&nbsp;</span>
                <span>总价：</span><span data-bind="text: totalPrice"></span>
            </div>
            <div data-role="navbar" data-grid="a">
                <ul>
                    <li>
                        <a href="#" data-icon="check" data-bind="click: save, css: {'ui-btn-active': !(orders().length > 0), 'ui-state-disabled': invalidOrderCount() > 0}">结算</a>
                    </li>
                    <li>
                        <a href="#" data-icon="delete" data-bind="click: cancelOrders, css: {'ui-btn-active': !(orders().length > 0)}">取消</a>
                    </li>
                </ul>
            </div>
        </footer>
        <!-- /ko -->
        <!-- /ko -->
    </div>

    <!-- ==============Wholesale Page================= -->
    <!-- Make sure the page id here is exactly the same as it defined in Consts.Pages -->
    <div data-role="page" id="Wholesale">
        <!-- ko if: activePage().pageId === 'Wholesale' -->
        <!-- ko with: activePage() -->
        <div data-role="header" data-position="fixed" data-tap-toggle="false">
            <a href="#HomePage" data-icon="home" data-bind="click: navigator.goHome">Home</a>
            <h1><span data-bind="text: title"></span></h1>
        </div>
        <div data-role="main" class="ui-content">
            <select id="wholesaleSelect" style="margin-left: unset; margin-right: unset" data-mini="true" data-native-menu="false" class="filterable-select" data-bind="selectChange: clearSelection, options: products, optionsText: 'Name', optionsValue: 'Id', value: selectedProductId"></select>
            <div data-bind="visible: productSelected" style="margin-top: 10px; margin-left: 3px;">
                <table>
                    <tr>
                        <td><label style="font-weight: bold;">价格：</label></td>
                        <td><input data-mini="true" type="number" style="width: 50px" data-bind="value: selectedProductPrice, enable: true" /></td>
                        <td><span data-bind="text: selectedProduct() ? '元/' + selectedProduct().WholesaleUnitName: ''"></span></td>
                    </tr>
                </table>
            </div>
            <div data-bind="visible: productSelected" style="margin-left: 3px;">
                <table>
                    <tr>
                        <td><span style="font-weight: bold; display: inline">数量：</span></td>
                        <td><a style="margin: 0" href="#" data-bind="click: decreaseQuantity" class="ui-btn ui-mini ui-shadow ui-corner-all ui-icon-minus ui-btn-icon-notext ui-btn-inline">Minus</a></td>
                        <td><input data-mini="true" type="number" style="width: 50px" data-bind="textInput: selectedProductQuantity, style: { border: (numberOnlyRegExp.test(selectedProductQuantity()) == false) ? '1px solid red' : '0'}" /></td>
                        <td><a style="margin: 0" href="#" data-bind="click: increaseQuantity" class="ui-btn ui-mini ui-shadow ui-corner-all ui-icon-plus ui-btn-icon-notext ui-btn-inline">Plus</a></td>
                    </tr>
                </table>
            </div>
            <div style="margin-left: 3px;" class="ui-grid-a" data-bind="visible: productSelected">
                <div class="ui-block-a">
                    <a data-role="button" class="ui-btn ui-mini ui-corner-all ui-shadow" href="#" data-bind="click: addOrder, css:{ 'ui-state-disabled': numberOnlyRegExp.test(selectedProductQuantity()) == false}">添加商品</a>
                </div>
                <div class="ui-block-b">
                    <a data-role="button" class="ui-btn ui-mini ui-corner-all ui-shadow" href="#" data-bind="click: cancelOrderAdding">取消</a>
                </div>
            </div>
            <hr style=" height:2px;border:none;border-top:2px dotted grey;" />
            <div data-bind="visible: orders().length > 0" style="font-size: 0.8em">
                <ul data-role="listview" data-inset="true" data-bind="foreach: orders, listview: orders">
                    <li style="padding-right: 0">
                        <table style="width: 100%">
                            <tr>
                                <td>
                                    <div>
                                        <span style="font-weight: bold" data-bind="text: product().Name"></span>
                                        <span>&nbsp;&nbsp;&nbsp;&nbsp;</span>
                                        <span data-bind="text: price() + '元'"></span>
                                        <span data-bind="text: '/' + product().WholesaleUnitName + '/'"></span>
                                        <span data-bind="text: product().Times"></span>
                                        <span data-bind="text: product().RetailUnitName"></span>
                                    </div>
                                </td>
                                <th rowspan="2" style="width: 1em">
                                    <a href="#" class="ui-btn ui-mini ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-inline" data-bind="click: $parent.deleteOrder"></a>
                                </th>
                            </tr>
                            <tr>
                                <td>
                                    <div style="display:inline">
                                        <table style="vertical-align: -webkit-baseline-middle; margin-left: -10px; display: inline;">
                                            <tr>
                                                <td>
                                                    <a href="#" style="margin: 0" class="ui-btn ui-mini ui-shadow ui-corner-all ui-icon-minus ui-btn-icon-notext ui-btn-inline" data-bind="click: $parent.decreaseOrderProductQuantity">Minus</a>
                                                </td>
                                                <td>
                                                    <!-- Use textInput binding instead of value binding to make the data changed immediatly, but not on losing focus. -->
                                                    <!-- http://knockoutjs.com/documentation/textinput-binding.html -->
                                                    <!--<input type="number" style="width: 30px; text-align: center" data-bind="value: quantity" />-->
                                                    <input type="number" style="width: 30px; text-align: center" data-bind="textInput: quantity, css: {'textbox-validation-error': $parent.numberOnlyRegExp.test(quantity()) == false}" />
                                                </td>
                                                <td>
                                                    <a href="#" style="margin: 0" class="ui-btn ui-shadow ui-corner-all ui-icon-plus ui-btn-icon-notext ui-btn-inline" data-bind="click: $parent.increaseOrderProductQuantity">Plus</a>
                                                </td>
                                            </tr>
                                        </table>
                                        <span>&nbsp;&nbsp;</span>
                                        <span data-bind="text: '小计'"></span>
                                        <span data-bind="text: total() + '元'"></span>
                                    </div>
                                </td>
                            </tr>
                        </table>

                    </li>
                </ul>
            </div>
        </div>
        <footer data-role="footer" data-position="fixed" data-tap-toggle="false" data-bind="visible: orders().length > 0">
            <div style="padding: 5px; text-align: center; color: orangered">
                <span>总量：</span><span data-bind="text: totalNumber"></span>
                <span>&nbsp;&nbsp;&nbsp;&nbsp;</span>
                <span>总价：</span><span data-bind="text: totalPrice"></span>
            </div>
            <div data-role="navbar" data-grid="a">
                <ul>
                    <li>
                        <a href="#" data-icon="check" data-bind="click: save, css: {'ui-btn-active': !(orders().length > 0), 'ui-state-disabled': invalidOrderCount() > 0}">结算</a>
                    </li>
                    <li>
                        <a href="#" data-icon="delete" data-bind="click: cancelOrders, css: {'ui-btn-active': !(orders().length > 0)}">取消</a>
                    </li>
                </ul>
            </div>
        </footer>
        <!-- /ko -->
        <!-- /ko -->
    </div>

    <!-- ==============Retail Page================= -->
    <!-- Make sure the page id here is exactly the same as it defined in Consts.Pages -->
    <div data-role="page" id="Retail">
        <!-- ko if: activePage().pageId === 'Retail' -->
        <!-- ko with: activePage() -->
        <div data-role="header" data-position="fixed" data-tap-toggle="false">
            <a href="#HomePage" data-icon="home" data-bind="click: navigator.goHome">Home</a>
            <h1><span data-bind="text: title"></span></h1>
        </div>
        <div data-role="main" class="ui-content">
            <select id="retailSelect" style="margin-left: unset; margin-right: unset" data-mini="true" data-native-menu="false" class="filterable-select" data-bind="selectChange: clearSelection, options: products, optionsText: 'Name', optionsValue: 'Id', value: selectedProductId"></select>
            <div data-bind="visible: productSelected" style="margin-top: 10px; margin-left: 3px;">
                <table>
                    <tr>
                        <td><label style="font-weight: bold;">价格：</label></td>
                        <td><input data-mini="true" type="number" style="width: 50px" data-bind="value: selectedProductPrice, enable: true" /></td>
                        <td><span data-bind="text: selectedProduct() ? '元/' + selectedProduct().RetailUnitName: ''"></span></td>
                    </tr>
                </table>
            </div>
            <div data-bind="visible: productSelected" style="margin-left: 3px;">
                <table>
                    <tr>
                        <td><span style="font-weight: bold; display: inline">数量：</span></td>
                        <td><a style="margin: 0" href="#" data-bind="click: decreaseQuantity" class="ui-btn ui-mini ui-shadow ui-corner-all ui-icon-minus ui-btn-icon-notext ui-btn-inline">Minus</a></td>
                        <td><input data-mini="true" type="number" style="width: 50px" data-bind="textInput: selectedProductQuantity, style: { border: (numberOnlyRegExp.test(selectedProductQuantity()) == false) ? '1px solid red' : '0'}" /></td>
                        <td><a style="margin: 0" href="#" data-bind="click: increaseQuantity" class="ui-btn ui-mini ui-shadow ui-corner-all ui-icon-plus ui-btn-icon-notext ui-btn-inline">Plus</a></td>
                    </tr>
                </table>
            </div>
            <div style="margin-left: 3px;" class="ui-grid-a" data-bind="visible: productSelected">
                <div class="ui-block-a">
                    <a data-role="button" class="ui-btn ui-mini ui-corner-all ui-shadow" href="#" data-bind="click: addOrder, css:{ 'ui-state-disabled': numberOnlyRegExp.test(selectedProductQuantity()) == false}">添加商品</a>
                </div>
                <div class="ui-block-b">
                    <a data-role="button" class="ui-btn ui-mini ui-corner-all ui-shadow" href="#" data-bind="click: cancelOrderAdding">取消</a>
                </div>
            </div>
            <hr style=" height:2px;border:none;border-top:2px dotted grey;" />
            <div data-bind="visible: orders().length > 0" style="font-size: 0.8em">
                <ul data-role="listview" data-inset="true" data-bind="foreach: orders, listview: orders">
                    <li style="padding-right: 0">
                        <table style="width: 100%">
                            <tr>
                                <td>
                                    <div>
                                        <span style="font-weight: bold" data-bind="text: product().Name"></span>
                                        <span>&nbsp;&nbsp;&nbsp;&nbsp;</span>
                                        <span data-bind="text: price() + '元'"></span>
                                        <span data-bind="text: '/' + product().RetailUnitName"></span>
                                    </div>
                                </td>
                                <th rowspan="2" style="width: 1em">
                                    <a href="#" class="ui-btn ui-mini ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-inline" data-bind="click: $parent.deleteOrder"></a>
                                </th>
                            </tr>
                            <tr>
                                <td>
                                    <div style="display:inline">
                                        <table style="vertical-align: -webkit-baseline-middle; margin-left: -10px; display: inline;">
                                            <tr>
                                                <td>
                                                    <a href="#" style="margin: 0" class="ui-btn ui-mini ui-shadow ui-corner-all ui-icon-minus ui-btn-icon-notext ui-btn-inline" data-bind="click: $parent.decreaseOrderProductQuantity">Minus</a>
                                                </td>
                                                <td>
                                                    <!-- Use textInput binding instead of value binding to make the data changed immediatly, but not on losing focus. -->
                                                    <!-- http://knockoutjs.com/documentation/textinput-binding.html -->
                                                    <!--<input type="number" style="width: 30px; text-align: center" data-bind="value: quantity" />-->
                                                    <input type="number" style="width: 30px; text-align: center" data-bind="textInput: quantity, css: {'textbox-validation-error': $parent.numberOnlyRegExp.test(quantity()) == false}" />
                                                </td>
                                                <td>
                                                    <a href="#" style="margin: 0" class="ui-btn ui-shadow ui-corner-all ui-icon-plus ui-btn-icon-notext ui-btn-inline" data-bind="click: $parent.increaseOrderProductQuantity">Plus</a>
                                                </td>
                                            </tr>
                                        </table>
                                        <span>&nbsp;&nbsp;</span>
                                        <span data-bind="text: '小计'"></span>
                                        <span data-bind="text: total() + '元'"></span>
                                    </div>
                                </td>
                            </tr>
                        </table>

                    </li>
                </ul>
            </div>
        </div>
        <footer data-role="footer" data-position="fixed" data-tap-toggle="false" data-bind="visible: orders().length > 0">
            <div style="padding: 5px; text-align: center; color: orangered">
                <span>总量：</span><span data-bind="text: totalNumber"></span>
                <span>&nbsp;&nbsp;&nbsp;&nbsp;</span>
                <span>总价：</span><span data-bind="text: totalPrice"></span>
            </div>
            <div data-role="navbar" data-grid="a">
                <ul>
                    <li>
                        <a href="#" data-icon="check" data-bind="click: save, css: {'ui-btn-active': !(orders().length > 0), 'ui-state-disabled': invalidOrderCount() > 0}">结算</a>
                    </li>
                    <li>
                        <a href="#" data-icon="delete" data-bind="click: cancelOrders, css: {'ui-btn-active': !(orders().length > 0)}">取消</a>
                    </li>
                </ul>
            </div>
        </footer>
        <!-- /ko -->
        <!-- /ko -->
    </div>

    <!-- ==============Retail Wholesale Page================= -->
    <!-- Make sure the page id here is exactly the same as it defined in Consts.Pages -->
    <div data-role="page" id="RetailWholesale">
        <!-- ko if: activePage().pageId === 'RetailWholesale' -->
        <!-- ko with: activePage() -->
        <div data-role="header" data-position="fixed" data-tap-toggle="false">
            <a href="#HomePage" data-icon="home" data-bind="click: navigator.goHome">Home</a>
            <h1><span data-bind="text: title"></span></h1>
        </div>
        <div data-role="main" class="ui-content">
            <select id="retailSelect" style="margin-left: unset; margin-right: unset" data-mini="true" data-native-menu="false" class="filterable-select" data-bind="selectChange: clearSelection, options: products, optionsText: 'Name', optionsValue: 'Id', value: selectedProductId"></select>
            <div data-bind="visible: productSelected" style="margin-top: 10px; margin-left: 3px;">
                <table>
                    <tr>
                        <td><label style="font-weight: bold;">价格：</label></td>
                        <td><input data-mini="true" type="number" style="width: 50px" data-bind="value: selectedProductPrice, enable: true" /></td>
                        <td><span data-bind="text: selectedProduct() ? '元/' + selectedProduct().RetailUnitName: ''"></span></td>
                    </tr>
                </table>
            </div>
            <div data-bind="visible: productSelected" style="margin-left: 3px;">
                <table>
                    <tr>
                        <td><span style="font-weight: bold; display: inline">数量：</span></td>
                        <td><a style="margin: 0" href="#" data-bind="click: decreaseQuantity" class="ui-btn ui-mini ui-shadow ui-corner-all ui-icon-minus ui-btn-icon-notext ui-btn-inline">Minus</a></td>
                        <td><input data-mini="true" type="number" style="width: 50px" data-bind="textInput: selectedProductQuantity, style: { border: (numberOnlyRegExp.test(selectedProductQuantity()) == false) ? '1px solid red' : '0'}" /></td>
                        <td><a style="margin: 0" href="#" data-bind="click: increaseQuantity" class="ui-btn ui-mini ui-shadow ui-corner-all ui-icon-plus ui-btn-icon-notext ui-btn-inline">Plus</a></td>
                    </tr>
                </table>
            </div>
            <div style="margin-left: 3px;" class="ui-grid-a" data-bind="visible: productSelected">
                <div class="ui-block-a">
                    <a data-role="button" class="ui-btn ui-mini ui-corner-all ui-shadow" href="#" data-bind="click: addOrder, css:{ 'ui-state-disabled': numberOnlyRegExp.test(selectedProductQuantity()) == false}">添加商品</a>
                </div>
                <div class="ui-block-b">
                    <a data-role="button" class="ui-btn ui-mini ui-corner-all ui-shadow" href="#" data-bind="click: cancelOrderAdding">取消</a>
                </div>
            </div>
            <hr style=" height:2px;border:none;border-top:2px dotted grey;" />
            <div data-bind="visible: orders().length > 0" style="font-size: 0.8em">
                <ul data-role="listview" data-inset="true" data-bind="foreach: orders, listview: orders">
                    <li style="padding-right: 0">
                        <table style="width: 100%">
                            <tr>
                                <td>
                                    <div>
                                        <span style="font-weight: bold" data-bind="text: product().Name"></span>
                                        <span>&nbsp;&nbsp;&nbsp;&nbsp;</span>
                                        <span data-bind="text: price() + '元'"></span>
                                        <span data-bind="text: '/' + product().RetailUnitName"></span>
                                    </div>
                                </td>
                                <th rowspan="2" style="width: 1em">
                                    <a href="#" class="ui-btn ui-mini ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-inline" data-bind="click: $parent.deleteOrder"></a>
                                </th>
                            </tr>
                            <tr>
                                <td>
                                    <div style="display:inline">
                                        <table style="vertical-align: -webkit-baseline-middle; margin-left: -10px; display: inline;">
                                            <tr>
                                                <td>
                                                    <a href="#" style="margin: 0" class="ui-btn ui-mini ui-shadow ui-corner-all ui-icon-minus ui-btn-icon-notext ui-btn-inline" data-bind="click: $parent.decreaseOrderProductQuantity">Minus</a>
                                                </td>
                                                <td>
                                                    <!-- Use textInput binding instead of value binding to make the data changed immediatly, but not on losing focus. -->
                                                    <!-- http://knockoutjs.com/documentation/textinput-binding.html -->
                                                    <!--<input type="number" style="width: 30px; text-align: center" data-bind="value: quantity" />-->
                                                    <input type="number" style="width: 30px; text-align: center" data-bind="textInput: quantity, css: {'textbox-validation-error': $parent.numberOnlyRegExp.test(quantity()) == false}" />
                                                </td>
                                                <td>
                                                    <a href="#" style="margin: 0" class="ui-btn ui-shadow ui-corner-all ui-icon-plus ui-btn-icon-notext ui-btn-inline" data-bind="click: $parent.increaseOrderProductQuantity">Plus</a>
                                                </td>
                                            </tr>
                                        </table>
                                        <span>&nbsp;&nbsp;</span>
                                        <span data-bind="text: '小计'"></span>
                                        <span data-bind="text: total() + '元'"></span>
                                    </div>
                                </td>
                            </tr>
                        </table>

                    </li>
                </ul>
            </div>
        </div>
        <footer data-role="footer" data-position="fixed" data-tap-toggle="false" data-bind="visible: orders().length > 0">
            <div style="padding: 5px; text-align: center; color: orangered">
                <span>总量：</span><span data-bind="text: totalNumber"></span>
                <span>&nbsp;&nbsp;&nbsp;&nbsp;</span>
                <span>总价：</span><span data-bind="text: totalPrice"></span>
            </div>
            <div data-role="navbar" data-grid="a">
                <ul>
                    <li>
                        <a href="#" data-icon="check" data-bind="click: save, css: {'ui-btn-active': !(orders().length > 0), 'ui-state-disabled': invalidOrderCount() > 0}">结算</a>
                    </li>
                    <li>
                        <a href="#" data-icon="delete" data-bind="click: cancelOrders, css: {'ui-btn-active': !(orders().length > 0)}">取消</a>
                    </li>
                </ul>
            </div>
        </footer>
        <!-- /ko -->
        <!-- /ko -->
    </div>


    <!-- ==============Order Management Page================= -->
    <!-- Try not bind UI stuff on Home Page like header and footer, because such UI binding will be applied until device ready,
        and at that time, static UI already loaded for a while, it is confusing for users becasue they can note that UI loaded at 2 different time point. -->
    <!-- Make sure the page id here is exactly the same as it defined in Consts.Pages -->
    <div data-role="page" id="OrderManagement">
        <!-- ko if: activePage().pageId === 'OrderManagement' -->
        <!-- ko with: activePage() -->
        <div data-role="header" data-position="fixed" data-tap-toggle="false">
            <a href="#HomePage" data-icon="home" data-bind="click: navigator.goHome">Home</a>
            <h1><span data-bind="text: title"></span></h1>
        </div>
        <div data-role="main" class="ui-content">
            <ul data-role="listview" data-inset="true" data-bind="foreach: batchOrders, listview: batchOrders">
                <li style="padding-right: 0">
                    <a style="font-weight: normal" href="#" data-bind="click: $parent.showDetails">
                        <table style="width: 100%">
                            <tr>
                                <td>
                                    <div>
                                        <span style="font-weight: bold" data-bind="text: $parent.getTypeName(Type)"></span>
                                        <span>&nbsp;&nbsp;&nbsp;&nbsp;</span>
                                        <span style="font-style: italic; font-size:0.8em" data-bind="text: CreatedDate"></span>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div style="display:inline; font-size: 0.8em">
                                        <span data-bind="text: '总量：' + Quantity"></span>
                                        <span>&nbsp;&nbsp;&nbsp;&nbsp;</span>
                                        <span data-bind="text: '总价：￥' + Total"></span>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </a>
                </li>
            </ul>
        </div>
        <!-- /ko -->
        <!-- /ko -->
    </div>

    <!-- ==============Batch Order Detail Page================= -->
    <!-- Make sure the page id here is exactly the same as it defined in Consts.Pages -->
    <div data-role="page" id="BatchOrderDetails">
        <!-- ko if: activePage().pageId === 'BatchOrderDetails' -->
        <!-- ko with: activePage() -->
        <div data-role="header" data-position="fixed" data-tap-toggle="false">
            <a href="#OrderManagement" data-icon="back" data-bind="click: back">Back</a>
            <h1><span data-bind="text: title"></span></h1>
        </div>
        <div data-role="main" class="ui-content">
            <h4 class="ui-bar ui-bar-a ui-corner-all" style="margin-top: 0.1em; margin-bottom: -0.7em;">
                <span data-bind="text: getTypeName(parameters.batchOrder.Type)"></span>
                <span>&nbsp;&nbsp;</span>
                <span style="font-style: italic; font-size:0.8em" data-bind="text: parameters.batchOrder.CreatedDate"></span>
            </h4>
            <div data-bind="visible: orders().length > 0" style="font-size: 0.9em">
                <ul data-role="listview" data-inset="true" data-bind="foreach: orders, listview: orders">
                    <li style="padding-right: 0">
                        <table style="width: 100%">
                            <tr>
                                <td>
                                    <div>
                                        <span style="font-weight: bold" data-bind="text: Product.Name"></span>
                                        <span>&nbsp;&nbsp;&nbsp;&nbsp;</span>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div style="display:inline">
                                        <span data-bind="text: Price+'元'"></span>
                                        <span data-bind="text: '/'+((Type == 1) ? Product.RetailUnitName : Product.WholesaleUnitName)"></span>
                                        <span>&nbsp;&nbsp;</span>
                                        <span data-bind="text: '数量：'"></span>
                                        <span data-bind="text: Quantity"></span>
                                        <span>&nbsp;&nbsp;</span>
                                        <span data-bind="text: '小计'"></span>
                                        <span data-bind="text: Total + '元'"></span>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </li>
                </ul>
            </div>
        </div>
        <footer data-role="footer" data-position="fixed" data-tap-toggle="false" data-bind="visible: orders().length > 0">
            <div style="padding: 5px; text-align: center; color: orangered">
                <span>总量：</span><span data-bind="text: parameters.batchOrder.Quantity"></span>
                <span>&nbsp;&nbsp;&nbsp;&nbsp;</span>
                <span>总价：</span><span data-bind="text: parameters.batchOrder.Total"></span>
            </div>
        </footer>
        <!-- /ko -->
        <!-- /ko -->
    </div>

    <!-- ==============Data Analyse Page================= -->
    <!-- Make sure the page id here is exactly the same as it defined in Consts.Pages -->
    <div data-role="page" id="DataAnalyse">
        <!-- ko if: activePage().pageId === 'DataAnalyse' -->
        <!-- ko with: activePage() -->
        <div data-role="header" data-position="fixed" data-tap-toggle="false">
            <a href="#" data-icon="back" data-bind="click: back">Back</a>
            <h1><span data-bind="text: title"></span></h1>
        </div>
        <div data-role="main" class="ui-content">
            <div class="ui-grid-a" data-bind="visible: !isChartVisible()">
                <div class="ui-block-a">
                    <a href="#" data-role="button" data-bind="click: showTodayChart">Today</a>
                </div>
                <div class="ui-block-b">
                    <a href="#" data-role="button" data-bind="click: showWeekChart">Week</a>
                </div>
                <div class="ui-block-a">
                    <a href="#" data-role="button" data-bind="click: showMonthChart">Month</a>
                </div>
                <div class="ui-block-b">
                    <a href="#" data-role="button" data-bind="click: showCustomChart">Custom</a>
                </div>
            </div>
            <div>
                <h4 data-bind="visible: isChartVisible" class="ui-bar ui-bar-a" style="margin-bottom: -0.1em; margin-top: 0">
                    <span data-bind="text: chartPageTitle"></span>
                </h4>
                <div class="ui-body ui-body-a" style="padding: 0 0.2em;" data-bind="visible: chartPageTitle() == 'Custom'">
                    <table>
                        <tr>
                            <td>
                                <input type="text" name="startDate" style="font-size: 0.8em" />
                            </td>
                            <td><span style="padding:0 5px">~</span></td>
                            <td>
                                <input type="text" name="endDate" style="font-size: 0.8em" />
                            </td>
                            <td>
                                <a href="#" class="ui-btn ui-icon-refresh ui-btn-icon-notext ui-corner-all" data-bind="click: refreshChart"></a>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            <div data-bind="visible: isChartVisible">
                <div data-role="navbar" data-bind="initialSelectedTab: {condition: isChartVisible, selector: 'a#quantityTab'}">
                    <ul>
                        <li><a href="#" id="quantityTab" data-ajax="false" class="ui-btn-active" data-bind="click: ()=>{setChartDataType('Quantity');}">Quantity</a></li>
                        <li><a href="#" data-ajax="false" data-bind="click: ()=>{setChartDataType('Total');}">Total</a></li>
                        <li><a href="#" data-ajax="false" data-bind="click: ()=>{setChartDataType('Profit');}">Profit</a></li>
                    </ul>
                </div>
                <div>
                    <select data-mini="true" data-native-menu="false" data-bind="options: quantitySaleTypeOptinos, optionsText: 'text', optionsValue: 'value', value: selectedQuantitySaleType"></select>
                    <span style="font-size: 0.8em; color:blue" data-bind="text: '* 此处数量单位为零售单位，便于比较。', visible: (chartDataType() == 'Quantity' && (selectedQuantitySaleType().toString() != '1' && selectedQuantitySaleType().toString() != '4')) && (!isEmptyData())"></span>
                    <canvas id="dataChart" width="400" height="400" data-bind="visible: !isEmptyData()"></canvas>
                    <div style="margin-top: 0.5em; text-align: center">
                        <span style="font-size: 0.9em; font-weight: bold" data-bind="visible: !isEmptyData(), text: chartSummary"></span>
                    </div>
                    <span data-bind="visible: isEmptyData">无数据！</span>
                </div>
            </div>
        </div>
        <!-- /ko -->
        <!-- /ko -->
    </div>
</body>
</html>